version: 2

models:
  - name: book_popularity
    description: "Popularity metrics for each book"
    columns:
      - name: book_title
        description: "The title of the book"
        tests:
          - unique
          - not_null
      - name: number_of_orders
        description: "The total number of times this book has been ordered"
        tests:
          - not_null
          - positive_value
      - name: total_revenue
        description: "The total revenue generated by this book"
        tests:
          - not_null
          - positive_value
      - name: average_price
        description: "The average price of the book"
        tests:
          - not_null
          - positive_value

  - name: user_preferences
    description: "Each user's favorite book based on order history"
    columns:
      - name: user_id
        description: "The unique identifier for the user"
        tests:
          - not_null
          - unique
      - name: favorite_book
        description: "The title of the book the user has ordered most frequently"
        tests:
          - not_null

  - name: book_recommendations
    description: "Personalized book recommendations for each user"
    columns:
      - name: user_id
        description: "The unique identifier for the user"
        tests:
          - not_null
      - name: recommended_book
        description: "The title of the recommended book"
        tests:
          - not_null
      - name: recommendation_strength
        description: "A score indicating the strength of the recommendation"
        tests:
          - not_null
          - positive_value
  - name: user_profile
    description: "Comprehensive user profile including preferences and top recommendation"
    columns:
      - name: user_id
        description: "The unique identifier for the user"
        tests:
          - unique
          - not_null
      - name: favorite_book
        description: "The user's favorite book based on purchase history"
        tests:
          - not_null
      - name: favorite_book_count
        description: "Number of times the favorite book was purchased"
        tests:
          - not_null
          - positive_value
      - name: favorite_book_total_spent
        description: "Total amount spent on the favorite book"
        tests:
          - not_null
          - positive_value
      - name: favorite_book_avg_spent
        description: "Average amount spent per purchase of the favorite book"
        tests:
          - not_null
          - positive_value
      - name: top_recommendation
        description: "The top recommended book for the user"
      - name: recommendation_strength
        description: "The strength of the top recommendation"
